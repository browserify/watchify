{
  "name": "falafel",
  "description": "transform the ast on a recursive walk",
  "version": "0.3.1",
  "repository": {
    "type": "git",
    "url": "git://github.com/substack/node-falafel.git"
  },
  "main": "index.js",
  "keywords": [
    "ast",
    "source",
    "traversal",
    "syntax",
    "tree",
    "burrito"
  ],
  "directories": {
    "example": "example",
    "test": "test"
  },
  "scripts": {
    "test": "tape test/*.js"
  },
  "devDependencies": {
    "tape": "~1.0.4"
  },
  "engines": {
    "node": ">=0.4.0"
  },
  "license": "MIT",
  "author": {
    "name": "James Halliday",
    "email": "mail@substack.net",
    "url": "http://substack.net"
  },
  "testling": {
    "files": "test/*.js",
    "browsers": {
      "iexplore": [
        "6.0",
        "7.0",
        "8.0",
        "9.0"
      ],
      "chrome": [
        "20.0"
      ],
      "firefox": [
        "10.0",
        "15.0"
      ],
      "safari": [
        "5.1"
      ],
      "opera": [
        "12.0"
      ]
    }
  },
  "readme": "# falafel\n\nTransform the [ast](http://en.wikipedia.org/wiki/Abstract_syntax_tree) on a\nrecursive walk.\n\n[![browser support](http://ci.testling.com/substack/node-falafel.png)](http://ci.testling.com/substack/node-falafel)\n\n[![build status](https://secure.travis-ci.org/substack/node-falafel.png)](http://travis-ci.org/substack/node-falafel)\n\nThis module is like [burrito](https://github.com/substack/node-burrito),\nexcept that it uses [esprima](http://esprima.org) instead of\n[uglify](https://github.com/mishoo/UglifyJS)\nfor friendlier-looking ast nodes.\n\n![falafel dÃ¶ner](http://substack.net/images/falafel.png)\n\n# example\n\n## array.js\n\nPut a function wrapper around all array literals.\n\n``` js\nvar falafel = require('falafel');\n\nvar src = '(' + function () {\n    var xs = [ 1, 2, [ 3, 4 ] ];\n    var ys = [ 5, 6 ];\n    console.dir([ xs, ys ]);\n} + ')()';\n\nvar output = falafel(src, function (node) {\n    if (node.type === 'ArrayExpression') {\n        node.update('fn(' + node.source() + ')');\n    }\n});\nconsole.log(output);\n```\n\noutput:\n\n```\n(function () {\n    var xs = fn([ 1, 2, fn([ 3, 4 ]) ]);\n    var ys = fn([ 5, 6 ]);\n    console.dir(fn([ xs, ys ]));\n})()\n```\n\n## custom keyword\n\nCreating custom keywords is super simple!\n\nThis example creates a new `beep` keyword that uppercases its arguments:\n\n``` js\nvar falafel = require('falafel');\nvar src = 'console.log(beep \"boop\", \"BOOP\");';\n\nfunction isKeyword (id) {\n    if (id === 'beep') return true;\n}\n\nvar output = falafel(src, { isKeyword: isKeyword }, function (node) {\n    if (node.type === 'UnaryExpression'\n    && node.keyword === 'beep') {\n        node.update(\n            'String(' + node.argument.source() + ').toUpperCase()'\n        );\n    }\n});\nconsole.log(output);\n```\n\nNow the source string `console.log(beep \"boop\", \"BOOP\");` is converted to:\n\n```\n$ node example/keyword.js\nconsole.log(String(\"boop\").toUpperCase(), \"BOOP\");\n```\n\nwhich we can execute:\n\n```\n$ node example/keyword.js | node\nBOOP BOOP\n```\n\nNeat!\n\n# methods\n\n``` js\nvar falafel = require('falafel')\n```\n\n## falafel(src, opts={}, fn)\n\nTransform the string source `src` with the function `fn`, returning a\nstring-like transformed output object.\n\nFor every node in the ast, `fn(node)` fires. The recursive walk is a\npre-traversal, so children get called before their parents.\n\nPerforming a pre-traversal makes it easier to write nested transforms since\ntransforming parents often requires transforming all its children first.\n\nThe return value is string-like (it defines `.toString()` and `.inspect()`) so\nthat you can call `node.update()` asynchronously after the function has\nreturned and still capture the output.\n\nInstead of passing a `src` you can also use `opts.source`.\n\nAll of the `opts` will be passed directly to esprima except for `'range'` which\nis always turned on because falafel needs it.\n\nSome of the options you might want from esprima includes:\n`'loc'`, `'raw'`, `'comments'`, `'tokens'`, and `'tolerant'`.\n\nfalafel uses a custom patch of esprima with support for an `opts.isKeyword()`\nfunction. When `opts.isKeyword(id)` returns `true`, the string `id` will be\ntreated as a keyword. You can use this behavior to create custom unary\nexpression keywords.\n\nAn `opts.isKeyword(id)` value that is a string will be mapped to existing types.\nThe only currently supported string value is `\"block\"`.\n\n# nodes\n\nAside from the regular [esprima](http://esprima.org) data, you can also call\nsome inserted methods on nodes.\n\nAside from updating the current node, you can also reach into sub-nodes to call\nupdate functions on children from parent nodes.\n\n## node.source()\n\nReturn the source for the given node, including any modifications made to\nchildren nodes.\n\n## node.update(s)\n\nTransform the source for the present node to the string `s`.\n\nNote that in `'ForStatement'` node types, there is an existing subnode called\n`update`. For those nodes all the properties are copied over onto the\n`node.update()` function.\n\n## node.parent\n\nReference to the parent element or `null` at the root element.\n\n# install\n\nWith [npm](http://npmjs.org) do:\n\n```\nnpm install falafel\n```\n\n# license\n\nMIT\n\n",
  "readmeFilename": "readme.markdown",
  "bugs": {
    "url": "https://github.com/substack/node-falafel/issues"
  },
  "homepage": "https://github.com/substack/node-falafel",
  "bundleDependencies": [
    "esprima"
  ],
  "_id": "falafel@0.3.1",
  "_shasum": "f3546748814f7d09543d19f2fb3d6090f136853d",
  "_from": "falafel@>=0.3.1 <0.4.0",
  "_resolved": "https://registry.npmjs.org/falafel/-/falafel-0.3.1.tgz",
  "dependencies": {
    "esprima": "*"
  }
}
